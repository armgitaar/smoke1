<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Alpas - The Rapid and Delightful Kotlin Web Framework</title>
    <link rel="stylesheet" href="{{ mix('css/app.css') }}">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
</head>

<body>

<div class="container">
    <div>

        <h1>To-Do List</h1>

        <form method="POST" action="{{ route('store') }}">
            <div class="form-group">
                <label for="linkField">Add To-Do</label>
                {% csrf %}
                <input type="text" class="form-control" id="task" name="newTask" autofocus="autofocus" placeholder="Go fishin'">
            </div>
            <button type="submit" class="btn btn-primary">Add</button>
        </form>

        <div id="result" style="display: none" class="mt-3">
            <label for="shortURL">
                Use this link:
            </label>

            <input type="text" class="form-control" id="shortURL">
        </div>

        <div id="error" style="display: none" class="mt-3">
           <div class="alert alert-danger">
               <span id="errorMessage"></span>
           </div>
        </div>

    </div>

    <h4>Latest To-Do's</h4>

    {% if total == 0 %}
    <div class="alert alert-warning">
        No tasks.
    </div>
    {% else %}

    <ul>
        {% for task in tasks %}


        <li>
            <div class="py-4 flex">
                <form action="{{ route('update', {"id": task.id}) }}" method="PATCH">
                {% csrf %}
                    <input type="checkbox" name="_method" value="complete" onChange="this.form.submit()" />


                </form>
            </div>
            {{ task.name }}
            <div class="py-4 flex">
                <form action="{{ route('delete', {"id": task.id}) }}" method="POST">
                {% csrf %}
                    <input type="hidden" name="_method" value="delete"/>
                    <button class="hover:text-red-800 text-red-600 text-sm uppercase hover-target">
                        Delete
                    </button>
                </form>
            </div>
        </li>
        {% endfor %}
    </ul>

    <h5>Total To-Do's: {{ total }}</h5>

    {% endif %}
</div>

<div class="container-fluid">

    {% if hasFlash('success') %}
    <div class="alert alert-success">
        {{ flash('success') }}
    </div>
    {% endif %}

    {% block content %}{% endblock %}
</div>

</body>

</html>
